---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import BlogCard from "../components/BlogCard.astro";
import SolidButton from "../components/Buttons/SolidButton.astro";
import ProjectCard from "../components/ProjectCard.astro";
import Spacer from "../components/Spacer.astro";
import heroImage from "../images/hero-image.png";
import MainLayout from "../layouts/MainLayout.astro";
import ResumeItem from "../components/ResumeItem.astro";

const articles = await Astro.glob("./blog/*.{md,mdx}");

const projects = articles
  .filter((post) => post.frontmatter.type === "Development")
  .sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf(),
  );

const posts = articles
  .filter((post) => post.frontmatter.type !== "development")
  .sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf(),
  );
---

<MainLayout title="Matthew Berger">
  <div
    class="flex items-center justify-center rounded-3xl bg-blue-600 py-44"
    transition:name="hero"
  >
    <h1
      class="text-center font-phudu text-8xl font-extrabold text-yellow-600"
      transition:name="hero-title"
    >
      I'm Matthew. <br /> Nice to Meet You!
    </h1>
  </div>

  <Spacer />

  <section class="flex gap-8">
    <div class="basis-2/3 space-y-8">
      <ResumeItem />
      <ResumeItem />
      <ResumeItem />
    </div>
    <div class="basis-1/3 rounded-3xl bg-orange-600 p-8">
      <h2
        class="rotate-180 py-8 font-phudu text-8xl font-extrabold text-yellow-600 [writing-mode:vertical-lr]"
      >
        My Experience
      </h2>
      <SolidButton
        text="View Full Resume"
        path="/blog"
        background="yellow"
        foreground="orange"
      />
    </div>
  </section>

  <Spacer />

  {/* Project Section */}

  <h2 class="font-phudu text-8xl font-extrabold text-yellow-600">
    My Projects
  </h2>
  <section class="flex flex-col items-stretch gap-8 md:flex-row">
    {
      projects &&
        projects
          .slice(0, 3)
          .map((project: any) => (
            <ProjectCard
              title={project.frontmatter.title}
              summary={project.frontmatter.summary}
              image={project.frontmatter.image}
              slug={project.url}
            />
          ))
    }
  </section>
  <div class="float-right">
    <SolidButton
      text="View All Projects"
      path="/projects"
      background="yellow"
      foreground="livid"
    />
  </div>

  <Spacer />

  <section class="flex gap-8">
    <div class="basis-1/3 rounded-3xl bg-yellow-600 p-8">
      <h2
        class="rotate-180 py-8 font-phudu text-8xl font-extrabold text-orange-600 [writing-mode:vertical-lr]"
      >
        Thoughts
      </h2>
      <SolidButton
        text="View All Posts"
        path="/blog"
        background="orange"
        foreground="yellow"
      />
    </div>
    <div class="basis-2/3 space-y-8">
      {
        posts &&
          posts
            .slice(0, 3)
            .map((post: any) => (
              <BlogCard
                title={post.frontmatter.title}
                summary={post.frontmatter.summary}
                image={post.frontmatter.image}
                slug={post.url}
                type={post.frontmatter.type}
              />
            ))
      }
    </div>
  </section>

  <Spacer />
</MainLayout>
